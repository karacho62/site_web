/* ==========================================================
 * Ministrap 1.1
 * http://www.mangolight.com/labs/ministrap
 * ==========================================================
 * Copyright 2014 MangoLight / http://www.mangolight.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
(function(a){a(function(){a(document).ready(function(){a(".tabs").miniTabs();a(".nav").each(function(){var k=parseInt(a("body").css("padding-top"))+15;a(this).attr("data-offset-top")&&(k=parseInt(a(this).attr("data-offset-top")));a(this).miniNav({offset_top:k})});a("a[data-dropdown],select.dropdown").each(function(){var k=a(this).attr("data-scroll");k&&("true"==k?k=!0:k=!1);var g=a(this).attr("data-columns");g&&(g=parseInt(g));a(this).miniDropdown({width:a(this).attr("data-width"),scroll:k,columns:g})});
a(".carousel").each(function(){var k=a(this).attr("data-arrows");k&&("true"==k?k=!0:k=!1);var g=a(this).attr("data-indicators");g&&("true"==g?g=!0:g=!1);var f=a(this).attr("data-auto");f&&("true"==f?f=!0:f=!1);var c=a(this).attr("data-delay");c&&(c=parseInt(c));var b=a(this).attr("data-stoponhover");b&&("true"==b?b=!0:b=!1);a(this).miniCarousel({mode:a(this).attr("data-mode"),arrows:k,indicators:g,auto:f,delay:c,stoponhover:b})});a(".to-top").miniToTop();a("[data-modal]").miniModal();a("[data-hint]").miniHint();
a("body").miniMobileMenu();a(".date-picker").each(function(){a(this).miniDatePicker({type:a(this).attr("data-type"),language:a(this).attr("data-language")})})})})})(jQuery);
(function(a){a.fn.miniModal=function(k){function g(b,d){b.bind("open",function(){b.addClass("opened");d.stop().appendTo("body").fadeIn("fast",function(){b.appendTo("body").css({position:"fixed",top:0,left:a(window).width()/2-b.width()/2,opacity:0}).show().stop().animate({top:70,opacity:1},function(){c(b)})}).click(function(){f(b,d)})});a(window).resize(function(){b.css({left:a(window).width()/2-b.width()/2});c(b)});a("body").keyup(function(c){27==c.keyCode&&b.is(a(".modal.opened").last())&&f(b,d)})}
function f(b,d){b.stop().animate({top:-50,opacity:0},"fast",function(){a(this).hide().removeClass("opened");a(this).hasClass("ajax")&&a(this).remove();d.stop().fadeOut("fast")})}function c(b){void 0===b.attr("data-fixed-top")&&b.attr("data-fixed-top",parseInt(b.css("top")));b.height()+parseInt(b.attr("data-fixed-top"))>a(window).height()?b.css({position:"absolute",top:a(window).scrollTop()+parseInt(b.attr("data-fixed-top"))}):b.css({position:"fixed",top:parseInt(b.attr("data-fixed-top"))})}a.extend({background:!0},
k);return this.not(".miniModal").each(function(){a(this).addClass("miniModal");var b=a(this),d=b.attr("data-modal"),c=a("<div>").addClass("modal-bg").appendTo("body");0==d.indexOf("#")||0==d.indexOf(".")?(d=a(d).appendTo("body"),0<d.length&&(g(d,c),b.click(function(){d.trigger("open");return!1}),d.bind("close",function(){f(d,c)}),d.find(".close").click(function(){f(d,c)}))):b.click(function(){a.ajax({url:b.attr("href"),success:function(d){var e=a("<div>").addClass("modal ajax").appendTo("body");""!=
b.attr("data-title")&&a("<div>").addClass("modal-title").html("<h5>"+b.attr("data-title")+'</h5> <div class="close">&times;</div>').appendTo(e);a("<div>").addClass("modal-content").html(d).appendTo(e);g(e,c);e.trigger("open");e.bind("close",function(){f(e,c)});e.find(".close").click(function(){f(e,c)})}});return!1})})}})(jQuery);
(function(a){a.fn.miniCarousel=function(k){function g(a,d){a.find(".carousel-indicators div").removeClass("active");a.find(".carousel-indicators div").eq(d).addClass("active")}function f(b,d){b.each(function(){a(this).css({width:d.width()})})}var c=a.extend({mode:"slide",arrows:!0,indicators:!0,auto:!0,delay:5E3,stoponhover:!0},k);return this.each(function(){var b=a(this),d=a(this).children("ul").eq(0),m=d.children("li").show();d.css({width:"999999px"}).attr("data-current-slide",0);"fade"==c.mode&&
m.css({position:"absolute",opacity:0}).eq(0).css({opacity:1,position:"relative"});f(m,b);var n;c.arrows&&(a("<div>").html("&lsaquo;").addClass("carousel-control left").appendTo(b).click(function(){b.trigger("slidePrev")}),a("<div>").html("&rsaquo;").addClass("carousel-control right").appendTo(b).click(function(){b.trigger("slideNext")}));if(c.indicators){for(var e=a("<div>").addClass("carousel-indicators").appendTo(b),l=0;l<m.length;l++)a("<div>").click(function(){b.trigger("slideTo",a(this).attr("data-slide"))}).appendTo(e).attr("data-slide",
l);g(b,0)}c.auto&&(n=window.setInterval(function(){b.hasClass("hover")||b.trigger("slideNext")},c.delay),c.stoponhover&&b.hover(function(){b.addClass("hover");clearInterval(n)},function(){b.removeClass("hover");n=window.setInterval(function(){b.hasClass("hover")||b.trigger("slideNext")},c.delay)}));b.miniSwipe({swipeLeft:function(){b.trigger("slideNext").trigger("stop")},swipeRight:function(){b.trigger("slidePrev").trigger("stop")}});a(window).resize(function(){f(m,b);d.stop().css({"margin-left":0});
c.indicators&&"slide"==c.mode&&(d.attr("data-current-slide",0),g(b,0))});b.bind("stop",function(){clearInterval(n)});b.bind("slideTo",function(a,e){0<d.children("li").eq(e).length&&0<=e&&(d.attr("data-current-slide",e),c.indicators&&g(b,e),"slide"==c.mode&&d.stop().animate({"margin-left":-1*e*b.width()}),"fade"==c.mode&&m.stop().animate({opacity:0}).eq(e).stop().animate({opacity:1}))});b.bind("slidePrev",function(){var a=d.attr("data-current-slide"),c=d.children("li").length;0==a?a=c-1:a--;b.trigger("slideTo",
a)});b.bind("slideNext",function(){var a=d.attr("data-current-slide"),c=d.children("li").length;a==c-1?a=0:a++;b.trigger("slideTo",a)})})}})(jQuery);
(function(a){a.fn.miniToTop=function(){function k(g){a(document).scrollTop()>1.5*a(window).height()?g.stop().show().animate({opacity:.75}):g.stop().animate({opacity:0},function(){a(this).hide()})}return this.each(function(){var g=a(this);g.html("&uarr;").hide().click(function(){a("html,body").stop().animate({scrollTop:0},300)});a(document).scroll(function(){k(g)});a(window).resize(function(){k(g)});k(g)})}})(jQuery);
(function(a){a.fn.miniTabs=function(k){function g(f){try{a(f.find("li.active a").attr("href")).show(),a(window).trigger("resize")}catch(c){}}return this.each(function(){var f=a(this);f.show();f.next(".tabs-content").children().hide();f.find("li a").click(function(){try{a(f.find("li.active a").attr("href")).hide()}catch(c){}f.find("li.active").removeClass("active");a(this).parent().addClass("active");g(f);return!1});f.find("li").click(function(){a(this).find("a").click();return!1});g(f)})}})(jQuery);
(function(a){a.fn.miniNav=function(k){function g(b){var d=null;b.find("li a").each(function(){try{a(a(this).attr("href")).offset().top<=a(document).scrollTop()+100&&(d=a(this))}catch(b){}});d||(d=b.find("li a").eq(0));b.find("li.active").removeClass("active");d.parent().addClass("active")}function f(b){b.css({position:"static",top:"auto",width:"auto",height:"auto"}).removeClass("fixed-done");if(665<=a(window).width())if(b.attr("data-top",b.offset().top-parseInt(b.css("margin-top"))).css({position:"fixed",
top:b.offset().top,width:b.width(),height:b.height()}).addClass("fixed-done"),a(document).scrollTop()<parseInt(b.attr("data-top"))-c.offset_top)b.css({top:parseInt(b.attr("data-top"))-a(document).scrollTop()});else{var d;try{d=a(b.attr("data-fixed-end")).offset().top+a(b.attr("data-fixed-end")).height()}catch(f){}a(document).scrollTop()+b.height()+c.offset_top+parseInt(b.css("margin-bottom"))>d?b.css({top:d-a(document).scrollTop()-b.height()-parseInt(b.css("margin-bottom"))}):b.css({top:c.offset_top})}}
var c=a.extend({offset_top:15},k);return this.each(function(){var b=a(this);a(window).scroll(function(){f(b);g(b)});a(window).resize(function(){f(b);g(b)});f(b)})}})(jQuery);
(function(a){a.fn.miniDropdown=function(k){function g(f,c){var b=a(f.attr("data-dropdown"));b.hide();f.removeClass("dropdown-opened");c.call(f,b)}return this.each(function(){var f=a(this);if(f.is("select")){var c=a.extend({onOpen:function(){},onClose:function(){},width:"parent",scroll:!0,columns:3},k),b=(new Date).getTime()+parseInt(999999999*Math.random(99999999)),d=a("<ul>").addClass("dropdown").insertAfter("body").attr("id","dropdown_"+b);a(this).find("option").each(function(){var b=a("<li>");
a("<a>").attr("href","#").attr("data-value",a(this).val()).text(a(this).text()).attr("style","border-radius:0;").appendTo(b);f.val()==a(this).val()&&b.addClass("active");d.append(b)});var m=d.width()+30;1<c.columns&&d.addClass("large");var n=a("<div>").addClass("select").text(f.find('option[value="'+f.val()+'"]').text()).insertAfter(a(this)).attr("data-dropdown","#dropdown_"+b).css({width:m});d.find("li").css({width:100/c.columns+"%"});n.miniDropdown({onSelect:function(b){f.val(a(b).attr("data-value"));
f.change();a(b).parent().parent().find(".active").removeClass("active");a(b).parent().addClass("active")},onOpen:c.onOpen,onClose:c.onClose,width:c.width,scroll:c.scroll,columns:c.columns});f.hide();d.insertAfter(f);f.change(function(){n.text(f.find("option:selected").text())})}else c=a.extend({onSelect:function(){},onOpen:function(){},onClose:function(){},width:180,scroll:!1,columns:1},k),1==a(f.attr("data-dropdown")).length&&(d=a(f.attr("data-dropdown")),f.click(function(){if(f.hasClass("dropdown-opened"))g(f,
c.onClose);else{a(".dropdown-opened").each(function(){g(a(this),c.onClose)});var b=f.width()+parseInt(f.css("padding-left"))+parseInt(f.css("padding-right")),m=c.width;"parent"==m?m=b:"auto"==m&&(m=d.width());var m=m*c.columns,h=f.offset().top+f.height()+parseInt(f.css("padding-top"))+parseInt(f.css("padding-bottom")),h=c.scroll?h+4:h+13;d.css({position:"absolute",top:h,left:f.offset().left+b/2-m/2+1,width:m});c.scroll&&d.css({"max-height":200,"overflow-y":"scroll","overflow-x":"hidden",width:d.width()}).addClass("scroll");
1<c.columns&&d.addClass("large");d.find("li").css({width:100/c.columns+"%"});d.height()+h<a(document).scrollTop()+a(window).height()?d.removeClass("arrow-bottom").addClass("arrow-top"):(h=f.offset().top-d.height(),h=c.scroll?h-8:h-4,d.css({top:h}).removeClass("arrow-top").addClass("arrow-bottom"));d.show();0>d.offset().left&&d.css({left:0});f.addClass("dropdown-opened");c.onOpen.call(f,d);a(window).resize(function(){f.hasClass("dropdown-opened")&&g(f,c.onClose)})}return!1}),d.find("a").click(function(){c.onSelect.call(f,
a(this));g(f,c.onClose);if("#"==a(this).attr("href"))return!1}))})}})(jQuery);
(function(a){a.fn.miniHint=function(k){return this.each(function(){function g(){d.html(b.attr("data-hint"));var m=0,g=0,e=b.attr("data-hint-position");"left"==e||"right"==e?(m=b.offset().top+f(b)/2-f(d)/2-parseInt(d.css("margin-top")),g="left"==e?b.offset().left-c(d)-10:b.offset().left+c(b)+10):(g=b.offset().left+c(b)/2-c(d)/2,"bottom"==e?m=b.offset().top+f(b)-parseInt(d.css("margin-top"))+10:(m=b.offset().top-(d.height()+parseInt(d.css("padding-top"))+parseInt(d.css("padding-bottom")))-parseInt(d.css("margin-top"))-
10,e="top"));d.addClass("minihint-"+e);a("<div>").addClass("minihint-arrow-"+e+"-border").appendTo(d);var k=a("<div>").addClass("minihint-arrow-"+e);k.css("border-"+e+"-color",d.css("background-color"));k.appendTo(d);d.css({top:m,left:g})}function f(a){return a.height()+parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom"))}function c(a){return a.width()+parseInt(a.css("padding-left"))+parseInt(a.css("padding-right"))}var b=a(this),d=a("<div>").addClass("minihint").hide();d.appendTo("body");
b.attr("data-hint-class")&&d.addClass(b.attr("data-hint-class"));a(window).load(function(){g();"true"==b.attr("data-hint-permanent")?(d.show(),a(window).resize(function(){g()}),a(document).change(function(){g()})):b.hover(function(){g();d.stop().css({display:"block",opacity:0}).animate({opacity:1})},function(){d.stop().animate({opacity:0},function(){a(this).hide()})})})})}})(jQuery);
(function(a){a.fn.miniMobileMenu=function(k){return this.each(function(){function g(b,c,f){665>a(window).width()?(b.hide(),f.show()):(b.show(),c.hide(),f.text("\u2630").hide())}if(0<a(this).find(".menu").length){var f=a(this).find(".menu").first(),c=f.clone().hide().addClass("minimobilemenu").appendTo("body"),b=a("<div>").text("\u2630").addClass("minimobilemenu_btn").appendTo("body").click(function(){"none"==c.css("display")?(c.css({top:"-100%"}).show().animate({top:0}),a(this).hide().html("&times;").fadeIn()):
(c.animate({top:"-100%"},function(){c.hide()}),a(this).hide().text("\u2630").fadeIn())});c.find("a").click(function(){var b=a(this).attr("href");b!=document.location.href&&a("body").fadeOut();c.animate({top:"100%"},function(){b!=document.location.href&&(document.location.href=b)});return!1});g(f,c,b);a(window).resize(function(){g(f,c,b)})}})}})(jQuery);
(function(a){a.fn.miniSwipe=function(k){var g=a.extend({swipeUp:function(){},swipeRight:function(){},swipeBottom:function(){},swipeLeft:function(){}},k);return this.each(function(){var f,c;a(this).on("touchstart",function(a){f=a.originalEvent.targetTouches[0].screenX;c=a.originalEvent.targetTouches[0].screenY});a(this).on("touchmove",function(a){a.preventDefault()});a(this).on("touchend",function(a){var d=a.originalEvent.changedTouches[0].screenX-f;a=a.originalEvent.changedTouches[0].screenY-c;Math.abs(a)>
Math.abs(d)?0<a?g.swipeDown.call(this):0>a&&g.swipeUp.call(this):0<d?g.swipeRight.call(this):0>d&&g.swipeLeft.call(this)})})}})(jQuery);
(function(a){a.fn.miniDatePicker=function(k){function g(b,d,g){if("time"!=c.type){g=a("<tr>").appendTo(a("<table>").appendTo(d));for(var k=0;3>k;k++){var e=c.date_format[k].toLowerCase(),l=a("<td>");if("d"==e)for(l.addClass("days"),e=1;31>=e;e++){var h=e;10>h&&(h="0"+h);0==(e-1)%8&&1<e&&l.append("<br/>");l.append(a("<span>").text(h))}else if("m"==e)for(l.addClass("months"),e=1;12>=e;e++){h=e;10>h&&(h="0"+h);var q=new Date("1987-"+h+"-01");try{var p=q.toLocaleString(c.language,{month:"long"});-1!=
p.indexOf(" ")&&(p=p.match(/[\D]+/g)[0].trim());h=p.charAt(0).toUpperCase()+p.slice(1);4<h.length&&(h=h.substring(0,3)+".")}catch(t){}0==(e-1)%3&&1<e&&l.append("<br/>");l.append(a("<span>").attr("data-month",e).text(h))}else if("y"==e){l.addClass("years");h=new Date;for(e=h.getFullYear()-1;e<=h.getFullYear()+1;e++)l.append(a("<span>").text(e)),l.append("<br/>");l.append(a("<span>").attr("contenteditable","true").keydown(function(b){if((48>b.keyCode||57<b.keyCode)&&8!=b.keyCode)return!1;if(8==b.keyCode)return!0;
if(4==a(this).text().length)return!1}).on("paste",function(){return!1}).keyup(function(){f(b,d)}))}g.append(l)}}if("date"!=c.type){g=a("<tr>").appendTo(a("<table>").appendTo(d));p=a("<td>").addClass("hours");12==c.time_format?(e=1,k=12):(e=0,k=23);for(;e<=k;e++)h=e,10>h&&(h="0"+h),(24==c.time_format&&0==e%8&&0<e||12==c.time_format&&0==e%4&&12>e)&&p.append("<br/>"),12==c.time_format&&12==e?p.prepend(a("<span>").text(h)):p.append(a("<span>").text(h));g.append(p);p=a("<td>").addClass("minutes");for(e=
0;60>e;e+=5)h=e,10>h&&(h="0"+h),0==e%4&&0<e&&p.append("<br/>"),p.append(a("<span>").text(h));g.append(p);12==c.time_format&&g.append(a("<td>").addClass("part").html("<span>AM</span><span>PM</span>"))}}function f(a,d){if(d.find("td .active").length==d.find("td").length){var f="";if("time"!=c.type){var f=parseInt(d.find(".days .active").text()),g=d.find(".months .active").attr("data-month"),e=d.find(".years .active").text();10>f&&(f="0"+f);10>g&&(g="0"+g);e?10>e?e="000"+e:100>e?e="00"+e:1E3>e&&(e="0"+
e):e="0000";f=e+"-"+g+"-"+f}"datetime"==c.type&&(f+=" ");"date"!=c.type&&(g=parseInt(d.find(".hours .active").text()),e=parseInt(d.find(".minutes .active").text()),12==c.time_format&&(12==g&&(g=0),d.find(".part .active").is(":last-child")&&(g+=12)),10>g&&(g="0"+g),10>e&&(e="0"+e),f+=g+":"+e+":00");a.val(f);a.trigger("change")}}var c=a.extend({type:"date",language:navigator.language},k);return this.each(function(){"date"!=c.type&&"datetime"!=c.type&&"time"!=c.type&&(c.type="date");c.language||(c.language=
"en");for(var b=new Date("1987-10-22 19:20:00"),d=b.toLocaleDateString(c.language),k=[".","/","-"],n,e=0;e<k.length;e++)if(-1!=d.indexOf(k[e])){n=d.split(k[e]);break}"object"!=typeof n&&(n=[10,22,1987]);c.date_format="";for(e=0;3>e;e++)1987==n[e]?c.date_format+="Y":10==n[e]?c.date_format+="M":22==n[e]&&(c.date_format+="D");d=b.toLocaleTimeString(c.language);-1!=d.indexOf("PM")?c.time_format=12:c.time_format=24;var l=a(this),h=a("<div>").addClass("minidatepicker_popup").appendTo("body"),q;g(l,h);l.on("focus click",
function(){a(".minidatepicker_popup").hide();var b=l.offset().top+l.height()+parseInt(l.css("padding-top"))+parseInt(l.css("padding-bottom"))+6,d=l.offset().left+l.width()/2+parseInt(l.css("padding-left"))+parseInt(l.css("padding-right")),f=h.width();h.css({top:b,left:d-f/2});h.height()+b<a(document).scrollTop()+a(window).height()?h.removeClass("arrow-bottom").addClass("arrow-top"):(b=l.offset().top-h.height()-4,h.css({top:b}).removeClass("arrow-top").addClass("arrow-bottom"));b=l.val();if("time"!=
c.type){var e;try{e=new Date(b);var g=e.getDate();if(g){h.find(".days span,.months span,.years span").removeClass("active");h.find(".days span").eq(g-1).addClass("active");var k=e.getMonth();h.find(".months span").eq(k).addClass("active");for(var m=e.getFullYear(),n=h.find(".years span"),g=!1,k=0;k<n.length;k++)if(n.eq(k).text()==m){n.eq(k).addClass("active");g=!0;break}g||h.find(".years span").last().text(m).addClass("active")}}catch(q){}}if("date"!=c.type){"time"==c.type&&(b="1987-10-22 "+b);try{e=
new Date(b);var s=e.getMinutes();if(null!==s){h.find(".hours span,.minutes span,.parts span").removeClass("active");h.find(".minutes span").eq(Math.floor(s/5)).addClass("active");var r=e.getHours();12==c.time_format&&(12<=r?(r-=12,h.find(".part span").eq(1).addClass("active")):h.find(".part span").eq(0).addClass("active"));h.find(".hours span").eq(r).addClass("active")}}catch(u){}}h.show()});h.on("mouseleave",function(){q=setTimeout(function(){h.fadeOut("fast")},1E3)});l.on("blur",function(){q=setTimeout(function(){h.fadeOut("fast")},
300)});h.on("mousemove",function(){clearInterval(q)});l.on("keydown",function(){h.hide()});h.find("span").click(function(){clearInterval(q);a(this).parent().find(".active").removeClass("active");a(this).addClass("active");f(l,h)})})}})(jQuery);